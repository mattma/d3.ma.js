/*! 
 	d3.ma.js - v0.2.0
 	Author: Matt Ma (matt@mattmadesign.com) 
 	Date: 2015-10-08
*/
!function(a,b){"object"==typeof exports?module.exports=b(require("d3")):"function"==typeof define&&define.amd?define(["d3"],b):b(window.d3)}("undefined"!=typeof window?window:this,function(a){"use strict";function b(a){var b,c,d,e;if(!a)return a;for(c=arguments.length,b=1;c>b;b++)if(d=arguments[b])for(e in d)a[e]=d[e];return a}var c=Object.hasOwnProperty,d=function(a,b){if(!a)throw new Error("[d3.chart] "+b)};d(a,"d3.js is required"),d("string"==typeof a.version&&a.version.match(/^3/),"d3.js version 3 is required");var e=/^(enter|update|merge|exit)(:transition)?$/,f=function(a){d(a,"Layers must be initialized with a base."),this._base=a,this._handlers={}};f.prototype.dataBind=function(){d(!1,"Layers must specify a `dataBind` method.")},f.prototype.insert=function(){d(!1,"Layers must specify an `insert` method.")},f.prototype.on=function(a,b,c){return c=c||{},d(e.test(a),"Unrecognized lifecycle event name specified to `Layer#on`: '"+a+"'."),a in this._handlers||(this._handlers[a]=[]),this._handlers[a].push({callback:b,chart:c.chart||null}),this._base},f.prototype.off=function(a,b){var c,f=this._handlers[a];if(d(e.test(a),"Unrecognized lifecycle event name specified to `Layer#off`: '"+a+"'."),!f)return this._base;if(1===arguments.length)return f.length=0,this._base;for(c=f.length-1;c>-1;--c)f[c].callback===b&&f.splice(c,1);return this._base},f.prototype.draw=function(b){var c,e,f,g,h,i,j,k;c=this.dataBind.call(this._base,b),d(c&&c.call===a.selection.prototype.call,"Invalid selection defined by `Layer#dataBind` method."),d(c.enter,"Layer selection not properly bound."),e=c.enter(),e._chart=this._base._chart,f=[{name:"update",selection:c},{name:"enter",selection:this.insert.bind(e)},{name:"merge",selection:c},{name:"exit",selection:c.exit.bind(c)}];for(var l=0,m=f.length;m>l;++l)if(i=f[l].name,g=f[l].selection,"function"==typeof g&&(g=g()),!g.empty()){if(d(g&&g.call===a.selection.prototype.call,"Invalid selection defined for '"+i+"' lifecycle event."),h=this._handlers[i])for(j=0,k=h.length;k>j;++j)g._chart=h[j].chart||this._base._chart,g.call(h[j].callback);if(h=this._handlers[i+":transition"],h&&h.length)for(g=g.transition(),j=0,k=h.length;k>j;++j)g._chart=h[j].chart||this._base._chart,g.call(h[j].callback)}},a.selection.prototype.layer=function(a){var b,c=new f(this);if(c.dataBind=a.dataBind,c.insert=a.insert,"events"in a)for(b in a.events)c.on(b,a.events[b]);return this.on=function(){return c.on.apply(c,arguments)},this.off=function(){return c.off.apply(c,arguments)},this.draw=function(){return c.draw.apply(c,arguments)},this};var g=function(a,b){var c,d=function(a){this.constructor=a};return d.prototype=a.prototype,c=new d(a),a.apply(c,b),c},h=function(a,b){var d=this.constructor,e=d.__super__;e&&h.call(e,a,b),c.call(d.prototype,"initialize")&&this.initialize.apply(a,b)},i=function(a,b){this.base=a,this._layers={},this._mixins=[],this._events={},b&&b.transform&&(this.transform=b.transform),h.call(this,this,[b])};i.prototype.initialize=function(){},i.prototype.unlayer=function(a){var b=this.layer(a);return delete this._layers[a],delete b._chart,b},i.prototype.layer=function(a,b,c){var e;if(1===arguments.length)return this._layers[a];if(2===arguments.length){if("function"==typeof b.draw)return b._chart=this,this._layers[a]=b,this._layers[a];d(!1,"When reattaching a layer, the second argument must be a d3.chart layer")}return e=b.layer(c),this._layers[a]=e,b._chart=this,e},i.prototype.transform=function(a){return a},i.prototype.mixin=function(a,b,c){var d=Array.prototype.slice.call(arguments,2);d.unshift(b);var e=i[a],f=g(e,d),h={chart:f,demux:c.demux?c.demux:!1};return this._mixins.push(h),f},i.prototype.draw=function(a){var b,c;a=this.transform(a);for(b in this._layers)this._layers[b].draw(a);for(c in this._mixins)if(this._mixins.hasOwnProperty(c)){var d=this._mixins[c].demux;d&&"function"==typeof d?this._mixins[c].chart.draw(d(a)):this._mixins[c].chart.draw(a)}},i.prototype.on=function(a,b,c){var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c||this,_chart:this}),this},i.prototype.once=function(a,b,c){var d=this,e=function(){d.off(a,e),b.apply(this,arguments)};return this.on(a,e,c)},i.prototype.off=function(a,b,c){var d,e,f,g,h,i;if(0===arguments.length){for(a in this._events)this._events[a].length=0;return this}if(1===arguments.length)return f=this._events[a],f&&(f.length=0),this;for(d=a?[a]:Object.keys(this._events),h=0;h<d.length;h++)for(e=d[h],f=this._events[e],i=f.length;i--;)g=f[i],(b&&b===g.callback||c&&c===g.context)&&f.splice(i,1);return this},i.prototype.trigger=function(a){var b,c,d=Array.prototype.slice.call(arguments,1),e=this._events[a];if(void 0!==e)for(b=0;b<e.length;b++)c=e[b],c.callback.apply(c.context,d);return this},i.extend=function(a,d,e){var f,g=this;f=d&&c.call(d,"constructor")?d.constructor:function(){return g.apply(this,arguments)},b(f,g,e);var h=function(){this.constructor=f};return h.prototype=g.prototype,f.prototype=new h,d&&b(f.prototype,d),f.__super__=g.prototype,i[a]=f,f},a.chart=function(a){return 0===arguments.length?i:1===arguments.length?i[a]:i.extend.apply(i,arguments)},a.selection.prototype.chart=function(a){if(0===arguments.length)return this._chart;var b,c=i[a];return d(c,"No chart registered with name '"+a+"'"),b=Array.prototype.slice.call(arguments,1),b.unshift(this),g(c,b)},a.selection.enter.prototype.chart=function(){return this._chart},a.transition.prototype.chart=a.selection.enter.prototype.chart;var j={version:"0.2.0"};j.canvas=[],j.setCanvas=function(a){return a||"object"==typeof a?void j.canvas.push(a):j.canvas},j.windowSize=function(){var a={width:640,height:480};return document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight),a},j.Color=function(){var b=a.scale.category20().range();return function(a,c){return a.color||b[c%b.length]}},j.calcTextWidth=function(b){if(b instanceof a.selection){var c=parseInt(b.style("font-size").replace("px","")),d=b.text().length;return d*c*.5}return 0},j.each=function(a,b,c){if(null!=a){var d={},e=Array.prototype.forEach;if(e&&a.forEach===e)a.forEach(b,c);else if(a.length===+a.length){for(var f=0,g=a.length;g>f;f++)if(b.call(c,a[f],f,a)===d)return}else for(var h in a)if(Object.prototype.hasOwnProperty.call(a,h)&&b.call(c,a[h],h,a)===d)return}},j.map=function(a,b,c){if(null!=a){var d=[],e=Array.prototype.map;if(e&&a.map===e)return a.map(b,c);if(a.length===+a.length)for(var f=0,g=a.length;g>f;f++)d.push(b.call(c,a[f],f,a));else for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&d.push(b.call(c,a[h],h,a));return d}},j.onResize=function(a,b){return function(c){a.call(b||this,c)}},j.resize=function(a){a="[object Array]"===Object.prototype.toString.call(a)?a:Array.prototype.slice.call(arguments);var b=[];return a.length&&j.each(a,function(a,c){b.push(j.onResize(a._resize,a))}),b},j.reloadResize=function(a){if(a="[object Array]"===Object.prototype.toString.call(a)?a:Array.prototype.slice.call(arguments),a.length){var b={width:j.windowSize().width,height:j.windowSize().height};j.each(a,function(a,c){a._resize.call(a||this),a._redraw(b)})}},j.$=function(a,b){function c(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}var d,b=b||document,e=Array.prototype.slice,f=/^\.([\w-]+)$/,g=/^[\w-]+$/,h=/^#([\w-]*)$/;return c(b)&&h.test(a)?(d=b.getElementById(RegExp.$1))?[d]:[]:1!==b.nodeType&&9!==b.nodeType?[]:e.call(f.test(a)?b.getElementsByClassName(RegExp.$1):g.test(a)?b.getElementsByTagName(a):b.querySelectorAll(a))},j.$$=function(a,b){var c=j.$(a,b);return c[0]},j.isNull=function(a){return null===a},j.isUndefined=function(a){return void 0===a},j.tooltip=function(a){var b={},a=a||b;return b.show=function(c,d,e,f){var g=document.createElement("div");g.className="d3maTooltip "+(f?f:"");var h=e||document.getElementsByTagName("body")[0];b!==a&&(h=a[0][0].parentNode.parentElement),g.innerHTML=d,g.style.left=0,g.style.top=0,g.style.opacity=0,h.appendChild(g);var i=c[0],j=c[1];return g.style.left=i+"px",g.style.top=j+"px",g.style.opacity=1,g.style.position="absolute",g.style.pointerEvents="none",b},b.close=function(){for(var a=document.getElementsByClassName("d3maTooltip"),c=[];a.length;)c.push(a[0]),a[0].style.transitionDelay="0 !important",a[0].style.opacity=0,a[0].className="d3maTooltip-pending-removal";return setTimeout(function(){for(;c.length;){var a=c.pop();a.parentNode.removeChild(a)}},500),b},b},j.zoom=function(){var a={};return a},j.container=function(b,c){function d(a,b){t.attr("transform","translate("+a+","+b+")")}function e(a,b,c){r.attr({width:a,height:b,x:-c,y:-1}),t.attr("clip-path","url(#"+p+")")}var f,g,h=c?a.select(c).select(b):a.select(b),i={top:30,right:10,bottom:20,left:40},k=c?j.$$(c+" "+b).clientWidth:j.$$(b).clientWidth||h[0][0].clientWidth||document.body.clientWidth||960,l=c?j.$$(c+" "+b).clientHeight:j.$$(b).clientHeight||h[0][0].clientHeight||window.innerHeight||540,m=h.append("svg"),n=Math.floor(1e3*Math.random()),o=m.append("defs"),p="clip-"+n,q=o.append("clipPath").attr("id",p),r=q.append("rect"),s="d3ma-"+n,t=m.append("g").classed("canvas",!0).attr({"class":"canvas",id:s}),u="xMidYMid",v=k/l,f=m.canvasW=function(a,b){return arguments.length?(b&&(a=parseInt(a)-i.left-i.right),t.attr("width",a),m):+t.attr("width")},g=m.canvasH=function(a,b){return arguments.length?(b&&(a=parseInt(a)-i.top-i.bottom),t.attr("height",a),m):+t.attr("height")};return m.box=function(a,b){var c=m.margin();if(!arguments.length)return{containerWidth:+f()+ +c.left+ +c.right,containerHeight:+g()+ +c.top+ +c.bottom};var h=b?b:a;return f(a,!0),g(h,!0),m.attr({width:a,height:h,viewBox:"0 0 "+a+" "+h,preserveAspectRatio:u}),v=a/h,k=a,l=h,d(c.left,c.top),e(a,h,c.left),m},m.margin=function(a){return arguments.length?(i.top="undefined"!=typeof a.top?a.top:i.top,i.right="undefined"!=typeof a.right?a.right:i.right,i.bottom="undefined"!=typeof a.bottom?a.bottom:i.bottom,i.left="undefined"!=typeof a.left?a.left:i.left,m.box(k,l),m):i},m.ratio=function(a){return arguments.length?(u=a,m.attr("preserveAspectRatio",a),m):u},m.canvas=function(){return m.select("g")},m.info=function(){var a=m.margin(),c=m.box();return{marginTop:a.top,marginRight:a.right,marginBottom:a.bottom,marginLeft:a.left,containerW:c.containerWidth,containerH:c.containerHeight,canvasW:f(),canvasH:g(),id:"#"+s,cid:"#"+p,parentNode:b}},m.resize=function(){return j.onResize(function(){var a=j.windowSize().width;if(k>a)m.attr({width:a,height:Math.round(a/v)});else{var b=+m.attr("width");k!==b&&m.attr({width:k,height:l})}}),m},m.fluid=function(){var a=m.info(),b=j.$$(a.parentNode);return b.setAttribute("data-fluid","responsive"),m},m.box(k,l),m},a.chart("Clip",{initialize:function(){var a=this.base.append("defs"),b=Math.floor(1e3*Math.random());this.width=this.base.attr("width")||0,this.height=this.base.attr("height")||0,this.x=0,this.y=0,this.clipPath=a.append("clipPath"),this.rect=this.clipPath.append("rect"),this.cid="clip-"+b,this.clipPath.attr("id",this.cid),this.rect.attr({width:this.width,height:this.height,x:this.x,y:this.y})},id:function(a){return 0===arguments.length?this.cid:(this.cid=a,this.clipPath.attr("id",a),this)},url:function(){return"url(#"+this.id()+")"},_width:function(a){return 0===arguments.length?this.width:(this.width=a,this.rect.attr("width",a),this)},_height:function(a){return 0===arguments.length?this.height:(this.height=a,this.rect.attr("height",a),this)},box:function(a,b){return 0===arguments.length?{width:this.width,height:this.height}:(this._width(a),1===arguments.length?this._height(a):this._height(b),this)},xy:function(a,b){return 0===arguments.length?{x:this.x,y:this.y}:(this.x=a,this.y=1===arguments.length?a:b,this.rect.attr({x:this.x,y:this.y}),this)}}),a.chart("Scale",{initialize:function(a){if(a=a||{},!a.info)throw new Error("Container Info {info: containerInfo} is absolultely required when an instance is created");var b=a.x||"linear",c=a.y||"linear";if(this._x=b,this._y=c,this.width=a.width||a.info.canvasW||this.base.attr("width")||1,this.width=+this.width,this.height=a.height||a.info.canvasH||this.base.attr("height")||1,this.height=+this.height,this.info=a.info,this.xScale=this._scale(b),this.yScale=this._scale(c),this._switchXScale(b,this.width),this._switchYScale(c,this.height,!1),a.y1){var d=a.y1||"linear";this.y1Scale=this._scale(d),this._switchYScale(d,this.height,!0)}},_switchXScale:function(a,b){switch(a){case"linear":this.xScale.range([0,b]);break;case"ordinal":this.xScale.rangeRoundBands([0,b],.1)}},_switchYScale:function(a,b,c){var d=c?this.y1Scale:this.yScale;switch(a){case"linear":d.range([b,15]);break;case"ordinal":d.rangeRoundBands([b,15],.1)}},_scale:function(b){switch(b){case"linear":return a.scale.linear();case"ordinal":return a.scale.ordinal();case"log":return a.scale.log();case"pow":return a.scale.pow();case"sqrt":return a.scale.sqrt();case"identity":return a.scale.identity();case"quantile":return a.scale.quantile();case"quantize":return a.scale.quantize();case"threshold":return a.scale.threshold();case"time":return a.time.scale();default:return a.scale.linear()}}}),a.chart("Scale").extend("Base",{initialize:function(b){b=b||{},this.box(this.width,this.height),this.dispatch=a.dispatch("d3maMouseenter","d3maMouseout","d3maOnWindowResize","d3maOffWindowResize","d3maSingleWindowResize")},w:function(a){return 0===arguments.length?this.width:(this.width=a,this.base.attr("width",this.width),this)},h:function(a){return 0===arguments.length?this.height:(this.height=a,this.base.attr("height",this.height),this)},box:function(a,b){return arguments.length?(this.w(a),this.h(b?b:a),this):{width:this.width,height:this.height}},_bindMouseEnterOutEvents:function(b,c){var b=b||this;c.on("mouseenter",function(d,e){a.select(this).classed("hover",!0);var f={};b.onDataMouseenter&&(f=b.onDataMouseenter(d,e,b,c[0][e])),b.dispatch.d3maMouseenter(f)}),c.on("mouseout",function(d,e){a.select(this).classed("hover",!1);var f={};b.onDataMouseout&&(f=b.onDataMouseout(d,e,b,c[0][e])),b.dispatch.d3maMouseout(f)})},_resize:function(){var a=this.info,b=j.$$(a.parentNode);if(!b)return!1;var c=j.windowSize(),d=b.getAttribute("data-fluid"),e=j.responsive?b.offsetLeft:j.$$(a.parentNode).offsetLeft+a.marginLeft+a.marginRight,f=j.responsive?b.offsetTop:b.offsetTop+a.marginTop+a.marginBottom,g=c.width-e,h=c.height-f;if("responsive"===d){var i=a.containerW,k=b.clientWidth,l=a.containerH,m=b.clientHeight;if(k>i||m>l){var n="0 0 "+k+" "+m,o=b.children[0],p=j.$$(a.id)||j.$$("#summaryChart").children[0].children[1],q=j.$$(a.cid+" rect")||j.$$("#summaryChart").children[0].children[0].children[0].children[0];o.setAttribute("width",k),o.setAttribute("height",m),o.setAttribute("viewBox",n),p.setAttribute("width",k),p.setAttribute("height",m),q.setAttribute("width",k),q.setAttribute("height",m)}var r={width:k,height:h<a.containerH?h:a.containerH};this.dispatch.d3maOnWindowResize(r)}else if(g<a.containerW||h<a.containerH){var r={width:g<a.containerW?g:a.containerW,height:h<a.containerH?h:a.containerH};this.dispatch.d3maOnWindowResize(r)}else{var s={width:a.canvasW,height:a.canvasH},t={width:a.containerW,height:a.containerH};this.dispatch.d3maOnWindowResize(t),this.dispatch.d3maOffWindowResize(s)}},_unbindResize:function(){var a=this.info,b={width:a.canvasW,height:a.canvasH};this.dispatch.d3maOffWindowResize(b)},_onWindowResize:function(a,b){var c=this;this.dispatch.on("d3maOnWindowResize",function(d){c._redraw(d,a,b)}),this.dispatch.on("d3maOffWindowResize",function(d){c._unbind(d,a,b)})},_redraw:function(a,b,c){var d=this.info,e=a.width-d.marginLeft-d.marginRight,f=a.height-d.marginTop-d.marginBottom;this._updateScale(e,f),this.dispatch.d3maSingleWindowResize(b,c),this._update&&this._update(e,f,b,c),this.update&&this.update(e,f,b,c)},_unbind:function(a,b,c){var d=this.info,e=+this.base.attr("width"),f=+this.base.attr("height"),g=d.canvasW,h=d.canvasH;(e!==g||f!==h)&&(this._updateScale(g,h),this.update&&this.update(g,h,b,c))},_updateScale:function(a,b){this._switchXScale(this._x,a),this._switchYScale(this._y,b),this.box(a,b)}}),a.chart("Base").extend("Axis",{initialize:function(b){this.options=b=b||{},this.guide=b.guide||!1,this.ticksOnResize=b.ticksOnResize||!1,this.xAxis=a.svg.axis().scale(this.xScale).orient("bottom"),this.yAxis=a.svg.axis().scale(this.yScale).orient("left"),this.guide&&(this.xAxis.tickPadding(5).tickSize(-this.height,0,6),this.yAxis.tickPadding(5).tickSize(-this.width,0,6)),this.xAxisG=this.base.append("g"),this.xAxisG.attr({"class":"x axis"}),this.xPos(),this.yAxisG=this.base.append("g"),this.yAxisG.attr({"class":"y axis"}),this.yPos(null,!1),b.y1&&(this.y1Axis=a.svg.axis().scale(this.y1Scale).orient("right").tickPadding(5),this.y1AxisG=this.base.append("g"),this.y1AxisG.attr({"class":"y1 axis"}),this.yPos(this.width,!0))},transform:function(a){if(this.onDataBind&&this.onDataBind(a),this.xAxisG.transition().duration(400).ease("cubic-out").call(this.xAxis),this.yAxisG.transition().duration(400).ease("cubic-out").call(this.yAxis),this.options.y1){var b=+this.base.attr("width");this.yPos(b,!0),this.y1AxisG.transition().duration(400).ease("cubic-out").call(this.y1Axis)}return this._onWindowResize(this),a},xPos:function(a){var a=a?a:this.height;return this.xAxisG.attr({transform:"translate(0,"+a+")"}),this},yPos:function(a,b){if(a){var c=b?this.y1AxisG:this.yAxisG;c.attr({transform:"translate("+a+" , 0)"})}return this},_update:function(a,b,c){this.update&&this.update(a,b,c),this.ticksOnResize&&this._redrawTicksOnResize(),this.xAxisG.attr({transform:"translate(0,"+b+")"}),this.guide&&(this.xAxis.tickSize(-this.height,0,6),this.yAxis.tickSize(-this.width,0,6)),this.xAxisG.transition().duration(400).ease("cubic-out").call(this.xAxis),this.yAxisG.transition().duration(400).ease("cubic-out").call(this.yAxis),this.options.y1&&this.y1AxisG.transition().duration(400).ease("cubic-out").call(this.y1Axis.orient("right"))},_redrawTicksOnResize:function(){var a=this.xScale.range(),b=this.yScale.range();"ordinal"!==this._x&&this.xAxis.ticks(Math.abs(a[1]-a[0])/100),"ordinal"!==this._y&&this.yAxis.ticks(Math.abs(b[1]-b[0])/100)},xLabel:function(a,b,c){var d=this.info,e=b+d.marginLeft,f=c-d.marginBottom;return this.xAxisG.append("text").classed("label",!0).attr({x:e||d.marginLeft-15,y:f||0,transform:"translate("+this.info.marginLeft+","+this.info.marginBottom+")"}).style("opacity",1e-6).text(a).transition().duration(1e3).ease("cubic-out").style("opacity",1),this},yLabel:function(a,b,c,d){var e=(this.info,d?this.y1AxisG:this.yAxisG),f=d?c:-c,g=d?-270:-90;return e.append("text").classed("label",!0).attr({x:f||-15,y:b||15,transform:"rotate("+g+") translate("+-this.info.marginTop+","+-this.info.marginLeft+")"}).style("opacity",1e-6).text(a).transition().duration(800).ease("cubic-out").style("opacity",1),this}}),a.chart("Base").extend("Bars",{initialize:function(a){this.options=a=a||{};var b=this;this.barsGroup=this.base.selectAll(".group"),this.layer("bars",this.barsGroup,{dataBind:function(a){var b=this.chart();return b.onDataBind&&b.onDataBind(a,b),b.rectsGroup?b.rectsGroup.data(a):this.data(a)},insert:function(){var a=this.chart();return a.onInsert&&a.onInsert(a),a.rectsGroup||(a.rectsGroup=this.append("g").classed("group",!0).append("rect")),a.rectsGroup},events:{enter:function(){var a=this.chart();a.onEnter&&a.onEnter(a,this)},"enter:transition":function(){var a=this.chart();a.onEnterTransition&&a.onEnterTransition(a,this)},merge:function(){var a=this.chart();a.onMerge&&a.onMerge(a,this),a._onWindowResize(a,this),b._bindMouseEnterOutEvents(a,this)},"exit:transition":function(){this.chart();this.duration(400).ease("cubic-in").style("opacity",1e-6).remove()}}})}}),a.chart("Base").extend("Line",{initialize:function(b){this.options=b=b||{},this.linePath=this.base.append("svg:path").classed("line",!0),this.line=a.svg.line(),this.layer("line",this.linePath,{dataBind:function(a){var b=this.chart();return b.dispatch.on("d3maSingleWindowResize",function(a,b){b.attr({d:a.line})}),b.line.x(function(a){return b.xScale(a.x)}).y(function(a){return b.yScale(a.y)}),b.onDataBind&&b.onDataBind(a,b),this.data([a])},insert:function(){var a=this.chart();return a.onInsert&&a.onInsert(a),a.linePath},events:{enter:function(){var a=this.chart();a.onEnter&&a.onEnter(a,this)},"enter:transition":function(){var a=this.chart();this.duration(700).ease("cubic-out").attr({d:a.line})},merge:function(){var a=this.chart();a._onWindowResize(a,this)},"exit:transition":function(){this.chart();this.duration(400).ease("cubic-in").style("opacity",1e-6).remove()}}})},_update:function(a,b,c,d){this.linePath.attr({d:c.line})}}),a.chart("Base").extend("Area",{initialize:function(b){this.options=b=b||{},this.areaPath=this.base.append("svg:path").classed("area",!0),this.area=a.svg.area(),this.layer("area",this.areaPath,{dataBind:function(a){var b=this.chart();return b.dispatch.on("d3maSingleWindowResize",function(a,b){b.attr({d:a.area})}),b.area.x(function(a){return b.xScale(a.x)}).y1(function(a){return b.yScale(a.y)}).y0(b.height),b.onDataBind&&b.onDataBind(a,b),this.data([a])},insert:function(){var a=this.chart();return a.onInsert&&a.onInsert(a),a.areaPath},events:{enter:function(){var a=this.chart();a.onEnter&&a.onEnter(a,this)},"enter:transition":function(){var a=this.chart();this.duration(700).ease("cubic-out").attr({d:a.area})},merge:function(){var a=this.chart();a._onWindowResize(a,this)},"exit:transition":function(){this.chart();this.duration(400).ease("cubic-in").style("opacity",1e-6).remove()}}})},_update:function(a,b,c,d){this.update&&this.update(a,b,c,d),this.areaPath.attr({d:c.area})}}),a.chart("Base").extend("Circle",{initialize:function(a){this.options=a=a||{};var b=this,c=a.showOnHover||!1;this.layer("circle",this.base,{dataBind:function(a){var b=this.chart();return b.onDataBind&&b.onDataBind(a,b),this.classed("dotHover",c?!0:!1).selectAll("circle").data(a)},insert:function(){var a=this.chart();return a.onInsert&&a.onInsert(a),this.append("circle")},events:{enter:function(){var a=this.chart();a.onEnter&&a.onEnter(a,this)},merge:function(){var a=this.chart();a._onWindowResize(a,this),b._bindMouseEnterOutEvents(a,this)},"exit:transition":function(){this.chart();this.duration(400).ease("cubic-in").style("opacity",1e-6).remove()}}})},_update:function(a,b,c,d){this.update&&this.update(a,b,c,d)}}),a.chart("Base").extend("Tree",{initialize:function(a){this.options=a=a||{};var b=this;this.layer("tree",this.base,{dataBind:function(a){var b=this.chart();return b.onDataBind&&(a=b.onDataBind(a,b)),this.selectAll("g.node").data(a,function(a){return a.id})},insert:function(){var a=this.chart(),b=this.insert("g").attr("class","node");return a.onInsert&&a.onInsert(a,b,this),b},events:{enter:function(){var a=this.chart();a.onEnter&&a.onEnter(a,this)},"enter:transition":function(){var a=this.chart();a.onEnterTransition&&a.onEnterTransition(a,this)},merge:function(){var a=this.chart();a.onMerge&&a.onMerge(a,this),a._onWindowResize(a,this),b._bindMouseEnterOutEvents(a,this)},"merge:transition":function(){var a=this.chart();a.onMergeTransition&&a.onMergeTransition(a,this)},"exit:transition":function(){var a=this.chart(),b=a.options.animationDurationRemove||400,c=a.options.animationEasing||"cubic-in-out";a.onRemove&&"function"==typeof a.onRemove?a.onRemove(a,this):this.duration(b).ease(c).style("opacity",1e-6).remove()}}})}}),a.chart("Base").extend("SimpleLine",{initialize:function(a){this.options=a=a||{};var b=this;this.layer("simpleLine",this.base,{dataBind:function(a){var b=this.chart();return b.onDataBind&&b.onDataBind(a,b),this.classed("simple-lines",!0).selectAll("line").data(a)},insert:function(){var a=this.chart();return a.onInsert&&a.onInsert(a),this.append("line")},events:{enter:function(){var a=this.chart();a.onEnter&&a.onEnter(a,this)},merge:function(){var a=this.chart();a._onWindowResize(a,this),b._bindMouseEnterOutEvents(a,this)},"exit:transition":function(){this.chart();this.duration(400).ease("cubic-in").style("opacity",1e-6).remove()}}})},_update:function(a,b,c,d){this.update&&this.update(a,b,c,d)}}),a.chart("Base").extend("DiagonalLine",{initialize:function(b){this.options=b||{},this.linePath=this.base.append("svg:g").classed("diagonalLine",!0),this.diagonal=a.svg.diagonal().projection(function(a){return[a.y,a.x]}),this.layer("diagonalLine",this.linePath,{dataBind:function(a){var b=this.chart();return b.dispatch.on("d3maSingleWindowResize",function(a,b){b.attr({d:a.diagonal})}),b.onDataBind&&(a=b.onDataBind(a,b)||a),this.selectAll("path.link").data(a,function(a){return a.target.id})},insert:function(){var a=this.chart(),b=this.insert("path","g").attr("class","link");return a.onInsert&&a.onInsert(a,b,this),b},events:{enter:function(){var a=this.chart();a.onEnter&&a.onEnter(a,this)},"enter:transition":function(){var a=this.chart();a.onEnterTransition&&a.onEnterTransition(a,this)},merge:function(){var a=this.chart();a._onWindowResize(a,this)},"merge:transition":function(){var a=this.chart();a.onMergeTransition&&a.onMergeTransition(a,this)},"exit:transition":function(){var a=this.chart(),b=a.options.animationDurationRemove||400,c=a.options.animationEasing||"cubic-in-out";a.onRemove&&"function"==typeof a.onRemove?a.onRemove(a,this):this.duration(b).ease(c).style("opacity",1e-6).remove()}}})},_update:function(a,b,c,d){this.linePath.attr({d:c.diagonal})}});var k="undefined"!=typeof window?a.ma=j:j;return k});