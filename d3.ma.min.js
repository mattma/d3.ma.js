/**
 * d3.ma.js - d3 magic for visualizing data based on object oriented principles
 * @version v0.2.1
 * @author Matt Ma <matt@mattmadesign.com>
 * @link https://github.com/mattma/d3.ma.js
 * @license MIT
 */
!function(t,i){"object"==typeof exports?module.exports=i(require("d3")):"function"==typeof define&&define.amd?define(["d3"],i):i(window.d3)}("undefined"!=typeof window?window:this,function(t){"use strict";function i(t){var i,e,n,a;if(!t)return t;for(e=arguments.length,i=1;e>i;i++)if(n=arguments[i])for(a in n)t[a]=n[a];return t}var e=Object.hasOwnProperty,n=function(t,i){if(!t)throw new Error("[d3.chart] "+i)};n(t,"d3.js is required"),n("string"==typeof t.version&&t.version.match(/^3/),"d3.js version 3 is required");var a=/^(enter|update|merge|exit)(:transition)?$/,r=function(t){n(t,"Layers must be initialized with a base."),this._base=t,this._handlers={}};r.prototype.dataBind=function(){n(!1,"Layers must specify a `dataBind` method.")},r.prototype.insert=function(){n(!1,"Layers must specify an `insert` method.")},r.prototype.on=function(t,i,e){return e=e||{},n(a.test(t),"Unrecognized lifecycle event name specified to `Layer#on`: '"+t+"'."),t in this._handlers||(this._handlers[t]=[]),this._handlers[t].push({callback:i,chart:e.chart||null}),this._base},r.prototype.off=function(t,i){var e,r=this._handlers[t];if(n(a.test(t),"Unrecognized lifecycle event name specified to `Layer#off`: '"+t+"'."),!r)return this._base;if(1===arguments.length)return r.length=0,this._base;for(e=r.length-1;e>-1;--e)r[e].callback===i&&r.splice(e,1);return this._base},r.prototype.draw=function(i){var e,a,r,s,o,h,c,u;e=this.dataBind.call(this._base,i),n(e&&e.call===t.selection.prototype.call,"Invalid selection defined by `Layer#dataBind` method."),n(e.enter,"Layer selection not properly bound."),a=e.enter(),a._chart=this._base._chart,r=[{name:"update",selection:e},{name:"enter",selection:this.insert.bind(a)},{name:"merge",selection:e},{name:"exit",selection:e.exit.bind(e)}];for(var l=0,d=r.length;d>l;++l)if(h=r[l].name,s=r[l].selection,"function"==typeof s&&(s=s()),!s.empty()){if(n(s&&s.call===t.selection.prototype.call,"Invalid selection defined for '"+h+"' lifecycle event."),o=this._handlers[h])for(c=0,u=o.length;u>c;++c)s._chart=o[c].chart||this._base._chart,s.call(o[c].callback);if(o=this._handlers[h+":transition"],o&&o.length)for(s=s.transition(),c=0,u=o.length;u>c;++c)s._chart=o[c].chart||this._base._chart,s.call(o[c].callback)}},t.selection.prototype.layer=function(t){var i,e=new r(this);if(e.dataBind=t.dataBind,e.insert=t.insert,"events"in t)for(i in t.events)e.on(i,t.events[i]);return this.on=function(){return e.on.apply(e,arguments)},this.off=function(){return e.off.apply(e,arguments)},this.draw=function(){return e.draw.apply(e,arguments)},this};var s=function(t,i){var e,n=function(t){this.constructor=t};return n.prototype=t.prototype,e=new n(t),t.apply(e,i),e},o=function l(t,i){var n=this.constructor,a=n.__super__;a&&l.call(a,t,i),e.call(n.prototype,"initialize")&&this.initialize.apply(t,i)},h=function(t,i){this.base=t,this._layers={},this._mixins=[],this._events={},i&&i.transform&&(this.transform=i.transform),o.call(this,this,[i])};h.prototype.initialize=function(){},h.prototype.unlayer=function(t){var i=this.layer(t);return delete this._layers[t],delete i._chart,i},h.prototype.layer=function(t,i,e){var a;if(1===arguments.length)return this._layers[t];if(2===arguments.length){if("function"==typeof i.draw)return i._chart=this,this._layers[t]=i,this._layers[t];n(!1,"When reattaching a layer, the second argument must be a d3.chart layer")}return a=i.layer(e),this._layers[t]=a,i._chart=this,a},h.prototype.transform=function(t){return t},h.prototype.mixin=function(t,i,e){var n=Array.prototype.slice.call(arguments,2);n.unshift(i);var a=h[t],r=s(a,n),o={chart:r,demux:e.demux?e.demux:!1};return this._mixins.push(o),r},h.prototype.draw=function(t){var i,e;t=this.transform(t);for(i in this._layers)this._layers[i].draw(t);for(e in this._mixins)if(this._mixins.hasOwnProperty(e)){var n=this._mixins[e].demux;n&&"function"==typeof n?this._mixins[e].chart.draw(n(t)):this._mixins[e].chart.draw(t)}},h.prototype.on=function(t,i,e){var n=this._events[t]||(this._events[t]=[]);return n.push({callback:i,context:e||this,_chart:this}),this},h.prototype.once=function(t,i,e){var n=this,a=function r(){n.off(t,r),i.apply(this,arguments)};return this.on(t,a,e)},h.prototype.off=function(t,i,e){var n,a,r,s,o,h;if(0===arguments.length){for(t in this._events)this._events[t].length=0;return this}if(1===arguments.length)return r=this._events[t],r&&(r.length=0),this;for(n=t?[t]:Object.keys(this._events),o=0;o<n.length;o++)for(a=n[o],r=this._events[a],h=r.length;h--;)s=r[h],(i&&i===s.callback||e&&e===s.context)&&r.splice(h,1);return this},h.prototype.trigger=function(t){var i,e,n=Array.prototype.slice.call(arguments,1),a=this._events[t];if(void 0!==a)for(i=0;i<a.length;i++)e=a[i],e.callback.apply(e.context,n);return this},h.extend=function(t,n,a){var r,s=this;r=n&&e.call(n,"constructor")?n.constructor:function(){return s.apply(this,arguments)},i(r,s,a);var o=function(){this.constructor=r};return o.prototype=s.prototype,r.prototype=new o,n&&i(r.prototype,n),r.__super__=s.prototype,h[t]=r,r},t.chart=function(t){return 0===arguments.length?h:1===arguments.length?h[t]:h.extend.apply(h,arguments)},t.selection.prototype.chart=function(t){if(0===arguments.length)return this._chart;var i,e=h[t];return n(e,"No chart registered with name '"+t+"'"),i=Array.prototype.slice.call(arguments,1),i.unshift(this),s(e,i)},t.selection.enter.prototype.chart=function(){return this._chart},t.transition.prototype.chart=t.selection.enter.prototype.chart;var c={version:"0.2.1"};c.canvas=[],c.setCanvas=function(t){return t||"object"==typeof t?void c.canvas.push(t):c.canvas},c.windowSize=function(){var t={width:640,height:480};return document.body&&document.body.offsetWidth&&(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(t.width=window.innerWidth,t.height=window.innerHeight),t},c.Color=function(){var i=t.scale.category20().range();return function(t,e){return t.color||i[e%i.length]}},c.calcTextWidth=function(i){if(i instanceof t.selection){var e=parseInt(i.style("font-size").replace("px","")),n=i.text().length;return n*e*.5}return 0},c.each=function(t,i,e){if(null!=t){var n={},a=Array.prototype.forEach;if(a&&t.forEach===a)t.forEach(i,e);else if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(i.call(e,t[r],r,t)===n)return}else for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&i.call(e,t[o],o,t)===n)return}},c.map=function(t,i,e){if(null!=t){var n=[],a=Array.prototype.map;if(a&&t.map===a)return t.map(i,e);if(t.length===+t.length)for(var r=0,s=t.length;s>r;r++)n.push(i.call(e,t[r],r,t));else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.push(i.call(e,t[o],o,t));return n}},c.onResize=function(t,i){return function(e){t.call(i||this,e)}},c.resize=function(t){t="[object Array]"===Object.prototype.toString.call(t)?t:Array.prototype.slice.call(arguments);var i=[];return t.length&&c.each(t,function(t,e){i.push(c.onResize(t._resize,t))}),i},c.reloadResize=function(t){if(t="[object Array]"===Object.prototype.toString.call(t)?t:Array.prototype.slice.call(arguments),t.length){var i={width:c.windowSize().width,height:c.windowSize().height};c.each(t,function(t,e){t._resize.call(t||this),t._redraw(i)})}},c.$=function(t,i){function e(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}var n,i=i||document,a=Array.prototype.slice,r=/^\.([\w-]+)$/,s=/^[\w-]+$/,o=/^#([\w-]*)$/;return e(i)&&o.test(t)?(n=i.getElementById(RegExp.$1))?[n]:[]:1!==i.nodeType&&9!==i.nodeType?[]:a.call(r.test(t)?i.getElementsByClassName(RegExp.$1):s.test(t)?i.getElementsByTagName(t):i.querySelectorAll(t))},c.$$=function(t,i){var e=c.$(t,i);return e[0]},c.isNull=function(t){return null===t},c.isUndefined=function(t){return void 0===t},c.tooltip=function(t){var i={},t=t||i;return i.show=function(e,n,a,r){var s=document.createElement("div");s.className="d3maTooltip "+(r?r:"");var o=a||document.getElementsByTagName("body")[0];i!==t&&(o=t[0][0].parentNode.parentElement),s.innerHTML=n,s.style.left=0,s.style.top=0,s.style.opacity=0,o.appendChild(s);var h=e[0],c=e[1];return s.style.left=h+"px",s.style.top=c+"px",s.style.opacity=1,s.style.position="absolute",s.style.pointerEvents="none",i},i.close=function(){for(var t=document.getElementsByClassName("d3maTooltip"),e=[];t.length;)e.push(t[0]),t[0].style.transitionDelay="0 !important",t[0].style.opacity=0,t[0].className="d3maTooltip-pending-removal";return setTimeout(function(){for(;e.length;){var t=e.pop();t.parentNode.removeChild(t)}},500),i},i},c.zoom=function(){var t={};return t},c.container=function(i,e){function n(t,i){w.attr("transform","translate("+t+","+i+")")}function a(t,i,e){m.attr({width:t,height:i,x:-e,y:-1}),w.attr("clip-path","url(#"+g+")")}var r,s,o=e?t.select(e).select(i):t.select(i),h={top:30,right:10,bottom:20,left:40},u=e?c.$$(e+" "+i).clientWidth:c.$$(i).clientWidth||o[0][0].clientWidth||document.body.clientWidth||960,l=e?c.$$(e+" "+i).clientHeight:c.$$(i).clientHeight||o[0][0].clientHeight||window.innerHeight||540,d=o.append("svg"),f=Math.floor(1e3*Math.random()),p=d.append("defs"),g="clip-"+f,y=p.append("clipPath").attr("id",g),m=y.append("rect"),v="d3ma-"+f,w=d.append("g").classed("canvas",!0).attr({"class":"canvas",id:v}),x="xMidYMid",b=u/l,r=d.canvasW=function(t,i){return arguments.length?(i&&(t=parseInt(t)-h.left-h.right),w.attr("width",t),d):+w.attr("width")},s=d.canvasH=function(t,i){return arguments.length?(i&&(t=parseInt(t)-h.top-h.bottom),w.attr("height",t),d):+w.attr("height")};return d.box=function(t,i){var e=d.margin();if(!arguments.length)return{containerWidth:+r()+ +e.left+ +e.right,containerHeight:+s()+ +e.top+ +e.bottom};var o=i?i:t;return r(t,!0),s(o,!0),d.attr({width:t,height:o,viewBox:"0 0 "+t+" "+o,preserveAspectRatio:x}),b=t/o,u=t,l=o,n(e.left,e.top),a(t,o,e.left),d},d.margin=function(t){return arguments.length?(h.top="undefined"!=typeof t.top?t.top:h.top,h.right="undefined"!=typeof t.right?t.right:h.right,h.bottom="undefined"!=typeof t.bottom?t.bottom:h.bottom,h.left="undefined"!=typeof t.left?t.left:h.left,d.box(u,l),d):h},d.ratio=function(t){return arguments.length?(x=t,d.attr("preserveAspectRatio",t),d):x},d.canvas=function(){return d.select("g")},d.info=function(){var t=d.margin(),e=d.box();return{marginTop:t.top,marginRight:t.right,marginBottom:t.bottom,marginLeft:t.left,containerW:e.containerWidth,containerH:e.containerHeight,canvasW:r(),canvasH:s(),id:"#"+v,cid:"#"+g,parentNode:i}},d.resize=function(){return c.onResize(function(){var t=c.windowSize().width;if(u>t)d.attr({width:t,height:Math.round(t/b)});else{var i=+d.attr("width");u!==i&&d.attr({width:u,height:l})}}),d},d.fluid=function(){var t=d.info(),i=c.$$(t.parentNode);return i.setAttribute("data-fluid","responsive"),d},d.box(u,l),d},t.chart("Clip",{initialize:function(){var t=this.base.append("defs"),i=Math.floor(1e3*Math.random());this.width=this.base.attr("width")||0,this.height=this.base.attr("height")||0,this.x=0,this.y=0,this.clipPath=t.append("clipPath"),this.rect=this.clipPath.append("rect"),this.cid="clip-"+i,this.clipPath.attr("id",this.cid),this.rect.attr({width:this.width,height:this.height,x:this.x,y:this.y})},id:function(t){return 0===arguments.length?this.cid:(this.cid=t,this.clipPath.attr("id",t),this)},url:function(){return"url(#"+this.id()+")"},_width:function(t){return 0===arguments.length?this.width:(this.width=t,this.rect.attr("width",t),this)},_height:function(t){return 0===arguments.length?this.height:(this.height=t,this.rect.attr("height",t),this)},box:function(t,i){return 0===arguments.length?{width:this.width,height:this.height}:(this._width(t),1===arguments.length?this._height(t):this._height(i),this)},xy:function(t,i){return 0===arguments.length?{x:this.x,y:this.y}:(this.x=t,this.y=1===arguments.length?t:i,this.rect.attr({x:this.x,y:this.y}),this)}}),t.chart("Scale",{initialize:function(t){if(t=t||{},!t.info)throw new Error("Container Info {info: containerInfo} is absolultely required when an instance is created");var i=t.x||"linear",e=t.y||"linear";if(this._x=i,this._y=e,this.width=t.width||t.info.canvasW||this.base.attr("width")||1,this.width=+this.width,this.height=t.height||t.info.canvasH||this.base.attr("height")||1,this.height=+this.height,this.info=t.info,this.xScale=this._scale(i),this.yScale=this._scale(e),this._switchXScale(i,this.width),this._switchYScale(e,this.height,!1),t.y1){var n=t.y1||"linear";this.y1Scale=this._scale(n),this._switchYScale(n,this.height,!0)}},_switchXScale:function(t,i){switch(t){case"linear":this.xScale.range([0,i]);break;case"ordinal":this.xScale.rangeRoundBands([0,i],.1)}},_switchYScale:function(t,i,e){var n=e?this.y1Scale:this.yScale;switch(t){case"linear":n.range([i,15]);break;case"ordinal":n.rangeRoundBands([i,15],.1)}},_scale:function(i){switch(i){case"linear":return t.scale.linear();case"ordinal":return t.scale.ordinal();case"log":return t.scale.log();case"pow":return t.scale.pow();case"sqrt":return t.scale.sqrt();case"identity":return t.scale.identity();case"quantile":return t.scale.quantile();case"quantize":return t.scale.quantize();case"threshold":return t.scale.threshold();case"time":return t.time.scale();default:return t.scale.linear()}}}),t.chart("Scale").extend("Base",{initialize:function(i){i=i||{},this.box(this.width,this.height),this.dispatch=t.dispatch("d3maMouseenter","d3maMouseout","d3maOnWindowResize","d3maOffWindowResize","d3maSingleWindowResize")},w:function(t){return 0===arguments.length?this.width:(this.width=t,this.base.attr("width",this.width),this)},h:function(t){return 0===arguments.length?this.height:(this.height=t,this.base.attr("height",this.height),this)},box:function(t,i){return arguments.length?(this.w(t),this.h(i?i:t),this):{width:this.width,height:this.height}},_bindMouseEnterOutEvents:function(i,e){var i=i||this;e.on("mouseenter",function(n,a){t.select(this).classed("hover",!0);var r={};i.onDataMouseenter&&(r=i.onDataMouseenter(n,a,i,e[0][a])),i.dispatch.d3maMouseenter(r)}),e.on("mouseout",function(n,a){t.select(this).classed("hover",!1);var r={};i.onDataMouseout&&(r=i.onDataMouseout(n,a,i,e[0][a])),i.dispatch.d3maMouseout(r)})},_resize:function(){var t=this.info,i=c.$$(t.parentNode);if(!i)return!1;var e=c.windowSize(),n=i.getAttribute("data-fluid"),a=c.responsive?i.offsetLeft:c.$$(t.parentNode).offsetLeft+t.marginLeft+t.marginRight,r=c.responsive?i.offsetTop:i.offsetTop+t.marginTop+t.marginBottom,s=e.width-a,o=e.height-r;if("responsive"===n){var h=t.containerW,u=i.clientWidth,l=t.containerH,d=i.clientHeight;if(u>h||d>l){var f="0 0 "+u+" "+d,p=i.children[0],g=c.$$(t.id)||c.$$("#summaryChart").children[0].children[1],y=c.$$(t.cid+" rect")||c.$$("#summaryChart").children[0].children[0].children[0].children[0];p.setAttribute("width",u),p.setAttribute("height",d),p.setAttribute("viewBox",f),g.setAttribute("width",u),g.setAttribute("height",d),y.setAttribute("width",u),y.setAttribute("height",d)}var m={width:u,height:o<t.containerH?o:t.containerH};this.dispatch.d3maOnWindowResize(m)}else if(s<t.containerW||o<t.containerH){var m={width:s<t.containerW?s:t.containerW,height:o<t.containerH?o:t.containerH};this.dispatch.d3maOnWindowResize(m)}else{var v={width:t.canvasW,height:t.canvasH},w={width:t.containerW,height:t.containerH};this.dispatch.d3maOnWindowResize(w),this.dispatch.d3maOffWindowResize(v)}},_unbindResize:function(){var t=this.info,i={width:t.canvasW,height:t.canvasH};this.dispatch.d3maOffWindowResize(i)},_onWindowResize:function(t,i){var e=this;this.dispatch.on("d3maOnWindowResize",function(n){e._redraw(n,t,i)}),this.dispatch.on("d3maOffWindowResize",function(n){e._unbind(n,t,i)})},_redraw:function(t,i,e){var n=this.info,a=t.width-n.marginLeft-n.marginRight,r=t.height-n.marginTop-n.marginBottom;this._updateScale(a,r),this.dispatch.d3maSingleWindowResize(i,e),this._update&&this._update(a,r,i,e),this.update&&this.update(a,r,i,e)},_unbind:function(t,i,e){var n=this.info,a=+this.base.attr("width"),r=+this.base.attr("height"),s=n.canvasW,o=n.canvasH;(a!==s||r!==o)&&(this._updateScale(s,o),this.update&&this.update(s,o,i,e))},_updateScale:function(t,i){this._switchXScale(this._x,t),this._switchYScale(this._y,i),this.box(t,i)}}),t.chart("Base").extend("Axis",{initialize:function(i){this.options=i=i||{},this.guide=i.guide||!1,this.ticksOnResize=i.ticksOnResize||!1,this.xAxis=t.svg.axis().scale(this.xScale).orient("bottom"),this.yAxis=t.svg.axis().scale(this.yScale).orient("left"),this.guide&&(this.xAxis.tickPadding(5).tickSize(-this.height,0,6),this.yAxis.tickPadding(5).tickSize(-this.width,0,6)),this.xAxisG=this.base.append("g"),this.xAxisG.attr({"class":"x axis"}),this.xPos(),this.yAxisG=this.base.append("g"),this.yAxisG.attr({"class":"y axis"}),this.yPos(null,!1),i.y1&&(this.y1Axis=t.svg.axis().scale(this.y1Scale).orient("right").tickPadding(5),this.y1AxisG=this.base.append("g"),this.y1AxisG.attr({"class":"y1 axis"}),this.yPos(this.width,!0))},transform:function(t){if(this.onDataBind&&this.onDataBind(t),this.xAxisG.transition().duration(400).ease("cubic-out").call(this.xAxis),this.yAxisG.transition().duration(400).ease("cubic-out").call(this.yAxis),this.options.y1){var i=+this.base.attr("width");this.yPos(i,!0),this.y1AxisG.transition().duration(400).ease("cubic-out").call(this.y1Axis)}return this._onWindowResize(this),t},xPos:function(t){var t=t?t:this.height;return this.xAxisG.attr({transform:"translate(0,"+t+")"}),this},yPos:function(t,i){if(t){var e=i?this.y1AxisG:this.yAxisG;e.attr({transform:"translate("+t+" , 0)"})}return this},_update:function(t,i,e){this.update&&this.update(t,i,e),this.ticksOnResize&&this._redrawTicksOnResize(),this.xAxisG.attr({transform:"translate(0,"+i+")"}),this.guide&&(this.xAxis.tickSize(-this.height,0,6),this.yAxis.tickSize(-this.width,0,6)),this.xAxisG.transition().duration(400).ease("cubic-out").call(this.xAxis),this.yAxisG.transition().duration(400).ease("cubic-out").call(this.yAxis),this.options.y1&&this.y1AxisG.transition().duration(400).ease("cubic-out").call(this.y1Axis.orient("right"))},_redrawTicksOnResize:function(){var t=this.xScale.range(),i=this.yScale.range();"ordinal"!==this._x&&this.xAxis.ticks(Math.abs(t[1]-t[0])/100),"ordinal"!==this._y&&this.yAxis.ticks(Math.abs(i[1]-i[0])/100)},xLabel:function(t,i,e){var n=this.info,a=i+n.marginLeft,r=e-n.marginBottom;return this.xAxisG.append("text").classed("label",!0).attr({x:a||n.marginLeft-15,y:r||0,transform:"translate("+this.info.marginLeft+","+this.info.marginBottom+")"}).style("opacity",1e-6).text(t).transition().duration(1e3).ease("cubic-out").style("opacity",1),this},yLabel:function(t,i,e,n){var a=(this.info,n?this.y1AxisG:this.yAxisG),r=n?e:-e,s=n?-270:-90;return a.append("text").classed("label",!0).attr({x:r||-15,y:i||15,transform:"rotate("+s+") translate("+-this.info.marginTop+","+-this.info.marginLeft+")"}).style("opacity",1e-6).text(t).transition().duration(800).ease("cubic-out").style("opacity",1),this}}),t.chart("Base").extend("Bars",{initialize:function(t){this.options=t=t||{};var i=this;this.barsGroup=this.base.selectAll(".group"),this.layer("bars",this.barsGroup,{dataBind:function(t){var i=this.chart();return i.onDataBind&&i.onDataBind(t,i),i.rectsGroup?i.rectsGroup.data(t):this.data(t)},insert:function(){var t=this.chart();return t.onInsert&&t.onInsert(t),t.rectsGroup||(t.rectsGroup=this.append("g").classed("group",!0).append("rect")),t.rectsGroup},events:{enter:function(){var t=this.chart();t.onEnter&&t.onEnter(t,this)},"enter:transition":function(){var t=this.chart();t.onEnterTransition&&t.onEnterTransition(t,this)},merge:function(){var t=this.chart();t.onMerge&&t.onMerge(t,this),t._onWindowResize(t,this),i._bindMouseEnterOutEvents(t,this)},"exit:transition":function(){this.chart();this.duration(400).ease("cubic-in").style("opacity",1e-6).remove()}}})}}),t.chart("Base").extend("Line",{initialize:function(i){this.options=i=i||{},this.linePath=this.base.append("svg:path").classed("line",!0),this.line=t.svg.line(),this.layer("line",this.linePath,{dataBind:function(t){var i=this.chart();return i.dispatch.on("d3maSingleWindowResize",function(t,i){i.attr({d:t.line})}),i.line.x(function(t){return i.xScale(t.x)}).y(function(t){return i.yScale(t.y)}),i.onDataBind&&i.onDataBind(t,i),this.data([t])},insert:function(){var t=this.chart();return t.onInsert&&t.onInsert(t),t.linePath},events:{enter:function(){var t=this.chart();t.onEnter&&t.onEnter(t,this)},"enter:transition":function(){var t=this.chart();this.duration(700).ease("cubic-out").attr({d:t.line})},merge:function(){var t=this.chart();t._onWindowResize(t,this)},"exit:transition":function(){this.chart();this.duration(400).ease("cubic-in").style("opacity",1e-6).remove()}}})},_update:function(t,i,e,n){this.linePath.attr({d:e.line})}}),t.chart("Base").extend("Area",{initialize:function(i){this.options=i=i||{},this.areaPath=this.base.append("svg:path").classed("area",!0),this.area=t.svg.area(),this.layer("area",this.areaPath,{dataBind:function(t){var i=this.chart();return i.dispatch.on("d3maSingleWindowResize",function(t,i){i.attr({d:t.area})}),i.area.x(function(t){return i.xScale(t.x)}).y1(function(t){return i.yScale(t.y)}).y0(i.height),i.onDataBind&&i.onDataBind(t,i),this.data([t])},insert:function(){var t=this.chart();return t.onInsert&&t.onInsert(t),t.areaPath},events:{enter:function(){var t=this.chart();t.onEnter&&t.onEnter(t,this)},"enter:transition":function(){var t=this.chart();this.duration(700).ease("cubic-out").attr({d:t.area})},merge:function(){var t=this.chart();t._onWindowResize(t,this)},"exit:transition":function(){this.chart();this.duration(400).ease("cubic-in").style("opacity",1e-6).remove()}}})},_update:function(t,i,e,n){this.update&&this.update(t,i,e,n),this.areaPath.attr({d:e.area})}}),t.chart("Base").extend("Circle",{initialize:function(t){this.options=t=t||{};var i=this,e=t.showOnHover||!1;this.layer("circle",this.base,{dataBind:function(t){var i=this.chart();return i.onDataBind&&i.onDataBind(t,i),this.classed("dotHover",e?!0:!1).selectAll("circle").data(t)},insert:function(){var t=this.chart();return t.onInsert&&t.onInsert(t),this.append("circle")},events:{enter:function(){var t=this.chart();t.onEnter&&t.onEnter(t,this)},merge:function(){var t=this.chart();t._onWindowResize(t,this),i._bindMouseEnterOutEvents(t,this)},"exit:transition":function(){this.chart();this.duration(400).ease("cubic-in").style("opacity",1e-6).remove()}}})},_update:function(t,i,e,n){this.update&&this.update(t,i,e,n)}}),t.chart("Base").extend("Tree",{initialize:function(t){this.options=t=t||{};var i=this;this.layer("tree",this.base,{dataBind:function(t){var i=this.chart();return i.onDataBind&&(t=i.onDataBind(t,i)),this.selectAll("g.node").data(t,function(t){return t.id})},insert:function(){var t=this.chart(),i=this.insert("g").attr("class","node");return t.onInsert&&t.onInsert(t,i,this),i},events:{enter:function(){var t=this.chart();t.onEnter&&t.onEnter(t,this)},"enter:transition":function(){var t=this.chart();t.onEnterTransition&&t.onEnterTransition(t,this)},merge:function(){var t=this.chart();t.onMerge&&t.onMerge(t,this),t._onWindowResize(t,this),i._bindMouseEnterOutEvents(t,this)},"merge:transition":function(){var t=this.chart();t.onMergeTransition&&t.onMergeTransition(t,this)},"exit:transition":function(){var t=this.chart(),i=t.options.animationDurationRemove||400,e=t.options.animationEasing||"cubic-in-out";t.onRemove&&"function"==typeof t.onRemove?t.onRemove(t,this):this.duration(i).ease(e).style("opacity",1e-6).remove()}}})}}),t.chart("Base").extend("SimpleLine",{initialize:function(t){this.options=t=t||{};var i=this;this.layer("simpleLine",this.base,{dataBind:function(t){var i=this.chart();return i.onDataBind&&i.onDataBind(t,i),this.classed("simple-lines",!0).selectAll("line").data(t)},insert:function(){var t=this.chart();return t.onInsert&&t.onInsert(t),this.append("line")},events:{enter:function(){var t=this.chart();t.onEnter&&t.onEnter(t,this)},merge:function(){var t=this.chart();t._onWindowResize(t,this),i._bindMouseEnterOutEvents(t,this)},"exit:transition":function(){this.chart();this.duration(400).ease("cubic-in").style("opacity",1e-6).remove()}}})},_update:function(t,i,e,n){this.update&&this.update(t,i,e,n)}}),t.chart("Base").extend("DiagonalLine",{initialize:function(i){this.options=i||{},this.linePath=this.base.append("svg:g").classed("diagonalLine",!0),this.diagonal=t.svg.diagonal().projection(function(t){return[t.y,t.x]}),this.layer("diagonalLine",this.linePath,{dataBind:function(t){var i=this.chart();return i.dispatch.on("d3maSingleWindowResize",function(t,i){i.attr({d:t.diagonal})}),i.onDataBind&&(t=i.onDataBind(t,i)||t),this.selectAll("path.link").data(t,function(t){return t.target.id})},insert:function(){var t=this.chart(),i=this.insert("path","g").attr("class","link");return t.onInsert&&t.onInsert(t,i,this),i},events:{enter:function(){var t=this.chart();t.onEnter&&t.onEnter(t,this)},"enter:transition":function(){var t=this.chart();t.onEnterTransition&&t.onEnterTransition(t,this)},merge:function(){var t=this.chart();t._onWindowResize(t,this)},"merge:transition":function(){var t=this.chart();t.onMergeTransition&&t.onMergeTransition(t,this)},"exit:transition":function(){var t=this.chart(),i=t.options.animationDurationRemove||400,e=t.options.animationEasing||"cubic-in-out";t.onRemove&&"function"==typeof t.onRemove?t.onRemove(t,this):this.duration(i).ease(e).style("opacity",1e-6).remove()}}})},_update:function(t,i,e,n){this.linePath.attr({d:e.diagonal})}});var u="undefined"!=typeof window?t.ma=c:c;return u});